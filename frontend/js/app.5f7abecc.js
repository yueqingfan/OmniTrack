(function(){"use strict";var e={8761:function(e,o,r){var t=r(5130),n=r(6768);const s={id:"app"};function a(e,o,r,t,a,i){const l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(l)])}var i={name:"App"},l=r(1241);const c=(0,l.A)(i,[["render",a]]);var u=c,d=r(1387),p=r(4232),g=r.p+"img/logo.12e3474b.png";const m={class:"home-container"},f={class:"login-box"},v={class:"form-login-container"},h={key:0,class:"form-login p-4"},b={class:"form-group"},k={class:"form-group"},w={class:"form-actions"},L={key:0,class:"error-message"},y={key:1,class:"form-login p-4"},E={class:"form-group"},C={class:"form-group"},O={class:"form-group"},_={class:"form-actions"},P={key:0,class:"error-message"};function U(e,o,r,s,a,i){return(0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("div",f,[o[16]||(o[16]=(0,n.Lk)("div",{class:"text-center avatar-box"},[(0,n.Lk)("img",{src:g,class:"img-thumbnail avatar",alt:"Logo"})],-1)),(0,n.Lk)("div",v,[a.isRegistering?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",h,[o[11]||(o[11]=(0,n.Lk)("h2",{class:"form-title"},"登录",-1)),(0,n.Lk)("div",b,[o[9]||(o[9]=(0,n.Lk)("label",{for:"username"},"账号",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"username",placeholder:"请输入账号",autocomplete:"off","onUpdate:modelValue":o[0]||(o[0]=e=>a.username=e)},null,512),[[t.Jo,a.username,void 0,{trim:!0}]])]),(0,n.Lk)("div",k,[o[10]||(o[10]=(0,n.Lk)("label",{for:"password"},"密码",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",class:"form-control",id:"password",placeholder:"请输入密码","onUpdate:modelValue":o[1]||(o[1]=e=>a.password=e)},null,512),[[t.Jo,a.password,void 0,{trim:!0}]])]),(0,n.Lk)("div",w,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:o[2]||(o[2]=(...e)=>i.switchToRegister&&i.switchToRegister(...e))},"注册"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:o[3]||(o[3]=(...e)=>i.login&&i.login(...e))},"登录")]),a.loginError?((0,n.uX)(),(0,n.CE)("div",L,(0,p.v_)(a.loginError),1)):(0,n.Q3)("",!0)])),a.isRegistering?((0,n.uX)(),(0,n.CE)("div",y,[o[15]||(o[15]=(0,n.Lk)("h2",{class:"form-title"},"注册",-1)),(0,n.Lk)("div",E,[o[12]||(o[12]=(0,n.Lk)("label",{for:"newUsername"},"用户名",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"newUsername",placeholder:"请输入用户名","onUpdate:modelValue":o[4]||(o[4]=e=>a.newUsername=e)},null,512),[[t.Jo,a.newUsername,void 0,{trim:!0}]])]),(0,n.Lk)("div",C,[o[13]||(o[13]=(0,n.Lk)("label",{for:"newPassword"},"密码",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",class:"form-control",id:"newPassword",placeholder:"请输入密码","onUpdate:modelValue":o[5]||(o[5]=e=>a.newPassword=e)},null,512),[[t.Jo,a.newPassword,void 0,{trim:!0}]])]),(0,n.Lk)("div",O,[o[14]||(o[14]=(0,n.Lk)("label",{for:"email"},"邮箱",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",class:"form-control",id:"email",placeholder:"请输入邮箱","onUpdate:modelValue":o[6]||(o[6]=e=>a.email=e)},null,512),[[t.Jo,a.email,void 0,{trim:!0}]])]),(0,n.Lk)("div",_,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:o[7]||(o[7]=(...e)=>i.login&&i.login(...e))},"登录"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:o[8]||(o[8]=(...e)=>i.register&&i.register(...e))},"注册")]),a.registerError?((0,n.uX)(),(0,n.CE)("div",P,(0,p.v_)(a.registerError),1)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])])])}r(4114);var T=r(4373),x={mounted(){console.log("Vue 组件已加载")},data(){return{username:"",password:"",newUsername:"",newPassword:"",email:"",isRegistering:!1,loginError:"",registerError:""}},methods:{async login(){try{const e=await T.A.post("http://localhost:8080/api/users/login",{username:this.username,password:this.password});200===e.status?(console.log("登录成功"),this.$router.push("/dashboard")):(console.log("响应状态非200，登录失败"),this.loginError="登录失败，请检查用户名或密码")}catch(e){console.error("登录请求错误",e),this.loginError="登录请求失败，请检查网络"}},async register(){try{const e={username:this.newUsername,password:this.newPassword,email:this.email},o=await T.A.post("http://localhost:8080/api/users/register",e,{headers:{"Content-Type":"application/json"}});200===o.status?(console.log("注册成功",o.data),this.switchToLogin()):this.registerError="注册失败，请重试"}catch(e){console.error("注册请求错误",e),this.registerError="注册请求失败，请检查网络"}},switchToRegister(){this.isRegistering=!0,this.loginError="",this.registerError=""},switchToLogin(){this.isRegistering=!1,this.loginError="",this.registerError=""}}};const j=(0,l.A)(x,[["render",U],["__scopeId","data-v-a1853fea"]]);var M=j;const R={class:"container"},X={class:"dashboard"},A={class:"video-container"},D={class:"video",ref:"video",controls:"",autoplay:""},I={class:"alerts"},Q={key:0,class:"alert-card warning"},V={key:1,class:"alert-card success"},J={class:"controls"};function S(e,o,r,t,s,a){return(0,n.uX)(),(0,n.CE)("div",R,[(0,n.Lk)("div",X,[(0,n.Lk)("div",A,[o[2]||(o[2]=(0,n.Lk)("h2",null,"实时视频监控",-1)),(0,n.Lk)("video",D,null,512)]),(0,n.Lk)("div",I,[o[3]||(o[3]=(0,n.Lk)("h3",null,"实时预警",-1)),s.alertMessage?((0,n.uX)(),(0,n.CE)("div",Q,[(0,n.Lk)("h4",null,(0,p.v_)(s.alertMessage),1),(0,n.Lk)("p",null,(0,p.v_)(s.alertDescription),1)])):(0,n.Q3)("",!0),s.detectionMessage?((0,n.uX)(),(0,n.CE)("div",V,[(0,n.Lk)("h4",null,(0,p.v_)(s.detectionMessage),1),(0,n.Lk)("p",null,(0,p.v_)(s.detectionDescription),1)])):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J,[(0,n.Lk)("button",{onClick:o[0]||(o[0]=(...e)=>a.togglePause&&a.togglePause(...e)),class:"control-btn"},"暂停/播放"),(0,n.Lk)("button",{onClick:o[1]||(o[1]=(...e)=>a.captureImage&&a.captureImage(...e)),class:"control-btn"},"截图")])])}var $={data(){return{alertMessage:"警报：异常聚集检测到！",alertDescription:"检测到某区域内人员迅速聚集，请注意调查。",detectionMessage:"行为识别：闯入检测",detectionDescription:"检测到有人员闯入禁区，请立即响应。"}},mounted(){this.startCamera()},methods:{togglePause(){const e=this.$refs.video;e.paused?e.play():e.pause()},captureImage(){const e=this.$refs.video,o=document.createElement("canvas");o.width=e.videoWidth,o.height=e.videoHeight,o.getContext("2d").drawImage(e,0,0);const r=o.toDataURL("image/png");console.log("截图保存：",r)},async startCamera(){try{const e=await navigator.mediaDevices.getUserMedia({video:!0}),o=this.$refs.video;o.srcObject=e}catch(e){console.error("摄像头访问失败:",e)}}}};const F=(0,l.A)($,[["render",S],["__scopeId","data-v-045c9b2c"]]);var H=F;const W=[{path:"/home",name:"Home",component:M},{path:"/dashboard",name:"Dashboard",component:H},{path:"/",redirect:"/home"}],q=(0,d.aE)({history:(0,d.LA)("/OmniTrack/frontend/"),routes:W});var z=q;(0,t.Ef)(u).use(z).mount("#app")}},o={};function r(t){var n=o[t];if(void 0!==n)return n.exports;var s=o[t]={exports:{}};return e[t].call(s.exports,s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(o,t,n,s){if(!t){var a=1/0;for(u=0;u<e.length;u++){t=e[u][0],n=e[u][1],s=e[u][2];for(var i=!0,l=0;l<t.length;l++)(!1&s||a>=s)&&Object.keys(r.O).every((function(e){return r.O[e](t[l])}))?t.splice(l--,1):(i=!1,s<a&&(a=s));if(i){e.splice(u--,1);var c=n();void 0!==c&&(o=c)}}return o}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[t,n,s]}}(),function(){r.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(o,{a:o}),o}}(),function(){r.d=function(e,o){for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/OmniTrack/frontend/"}(),function(){var e={524:0};r.O.j=function(o){return 0===e[o]};var o=function(o,t){var n,s,a=t[0],i=t[1],l=t[2],c=0;if(a.some((function(o){return 0!==e[o]}))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(l)var u=l(r)}for(o&&o(t);c<a.length;c++)s=a[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(u)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))}();var t=r.O(void 0,[504],(function(){return r(8761)}));t=r.O(t)})();
//# sourceMappingURL=app.5f7abecc.js.map